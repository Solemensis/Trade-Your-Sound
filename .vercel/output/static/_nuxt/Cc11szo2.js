import{_ as v,r as g,c as i,o as l,d as s,w as y,t as _,u as p,e as m,v as x,m as I,p as k,q as V,g as w,i as D,j as F,k as M,a as f,D as A,l as S,n as T,E as P}from"./Czqr_EBs.js";import{r as E,a as j}from"./TpeEdVKv.js";const B={class:"label-and-input"},R={style:{position:"absolute",left:"-2rem",top:"2.8rem",color:"#aaa"}},z={for:""},q=["placeholder"],W={__name:"Name",props:{title:String,name:String,placeholder:String},emits:["changeInput"],setup(o,{emit:u}){const d=o,a=u,e=g(""),r=()=>{a("changeInput",e.value,d.name)};return(c,t)=>(l(),i("div",null,[s("div",B,[s("span",R,_(25-p(e).length),1),s("label",z,[m(_(o.title)+" ",1),t[1]||(t[1]=s("span",{class:"green-span"},"*",-1))]),y(s("input",{maxlength:"25",type:"text",placeholder:o.placeholder,"onUpdate:modelValue":t[0]||(t[0]=n=>I(e)?e.value=n:null),onInput:r},null,40,q),[[x,p(e)]])])]))}},H=v(W,[["__scopeId","data-v-f18b24f1"]]),O={class:"label-and-input"},X={for:""},Y=["placeholder"],G={__name:"Price",props:{title:String,name:String,placeholder:String},emits:["changeInput"],setup(o,{emit:u}){const d=o,a=u,e=g(""),r=()=>{a("changeInput",e.value,d.name)};return(c,t)=>(l(),i("div",O,[s("label",X,[m(_(o.title)+" ",1),t[1]||(t[1]=s("span",{class:"green-span"},"*",-1))]),y(s("input",{class:"price-input",type:"text",placeholder:o.placeholder,"onUpdate:modelValue":t[0]||(t[0]=n=>I(e)?e.value=n:null),onInput:r},null,40,Y),[[x,p(e)]])]))}},J=v(G,[["__scopeId","data-v-f0600748"]]),K={class:"label-and-input"},Q={key:1,value:"sound-effects"},Z={key:2,value:"ui-sounds"},ee={key:3,value:"foley-sounds"},te={key:4,value:"dialogue"},ne={disabled:"",key:5,value:"soundscapes"},se={disabled:"",key:6,value:"environmental-sounds"},oe={__name:"Categories",props:{title:String,name:String},emits:["changeInput"],setup(o,{emit:u}){const d=o,a=u,e=g(""),r=()=>{a("changeInput",e.value,d.name)};return(c,t)=>(l(),i("div",K,[s("label",null,[m(_(o.title)+" ",1),t[1]||(t[1]=s("span",{class:"green-span"},"*",-1))]),y(s("select",{onChange:r,"onUpdate:modelValue":t[0]||(t[0]=n=>I(e)?e.value=n:null)},[(l(),i("option",Q,"Sound Effects")),(l(),i("option",Z,"UI Sounds")),(l(),i("option",ee,"Foley Sounds")),(l(),i("option",te,"Dialogue")),(l(),i("option",ne,"Soundscapes")),(l(),i("option",se," Environmental Sounds "))],544),[[k,p(e)]])]))}},ae=v(oe,[["__scopeId","data-v-e22fdaac"]]),ie={class:"label-and-input"},le={for:""},re={key:1,value:"raw"},ce={key:2,value:"edited"},ue={key:3,value:"mastered"},de={__name:"Processing",props:{title:String,name:String,options:Array},emits:["changeInput"],setup(o,{emit:u}){const d=o,a=u,e=g(""),r=()=>{a("changeInput",e.value,d.name)};return(c,t)=>(l(),i("div",ie,[s("label",le,[m(_(o.title)+" ",1),t[1]||(t[1]=s("span",{class:"green-span"},"*",-1))]),y(s("select",{onChange:r,"onUpdate:modelValue":t[0]||(t[0]=n=>I(e)?e.value=n:null)},[(l(),i("option",re,"Raw")),(l(),i("option",ce,"Edited")),(l(),i("option",ue,"Mastered"))],544),[[k,p(e)]])]))}},pe=v(de,[["__scopeId","data-v-528588d3"]]),_e={class:"label-and-input"},me={for:""},ge={style:{position:"absolute",left:"1rem",color:"#aaa"}},he=["placeholder"],fe={__name:"Description",props:{title:String,name:String,placeholder:String},emits:["changeInput"],setup(o,{emit:u}){const d=o,a=u,e=g(""),r=()=>{a("changeInput",e.value,d.name)};return(c,t)=>(l(),i("div",_e,[s("label",me,[m(_(o.title)+" ",1),t[1]||(t[1]=s("span",{class:"green-span"},"*",-1))]),s("span",ge,_(550-p(e).length),1),y(s("textarea",{maxlength:"550",type:"text",placeholder:o.placeholder,"onUpdate:modelValue":t[0]||(t[0]=n=>I(e)?e.value=n:null),onInput:r},null,40,he),[[x,p(e)]])]))}},ve=v(fe,[["__scopeId","data-v-9ca210f9"]]),be={class:"input-box"},ye={for:""},Ie={class:"input"},$e={key:0},Ce={key:1,style:{color:"#3fcf8e"}},Se={key:0,style:{top:"-5rem","white-space":"nowrap"}},xe={style:{"font-size":"1.1rem",color:"orangered"}},ke={__name:"File",props:{title:String},emits:["changeInput"],setup(o,{emit:u}){const d=V("audioAudio",()=>({audio:null})),a=u,e=g(""),r=t=>{const n=t.target;if(n.files){if(n.files[0].type!="audio/mpeg"){c.value="For now, we can only accept mp3 files.",setTimeout(()=>{c.value=""},4e3);return}const h=new Audio;h.addEventListener("loadedmetadata",()=>{h.duration>=30?(c.value="For now, you can't upload an audio longer than 30 seconds.",setTimeout(()=>{c.value=""},4e3)):(d.value.audio=n.files[0],a("changeInput",n.files[0],"audio"),e.value=n.files[0].name,c.value="")}),h.src=URL.createObjectURL(n.files[0])}},c=g("");return(t,n)=>(l(),i("div",be,[s("label",ye,[m(_(o.title),1),n[0]||(n[0]=s("span",{class:"green-span"}," *",-1))]),s("div",Ie,[s("input",{type:"file",accept:"audio/mpeg",style:{height:"100%",width:"100%",opacity:"0","z-index":"100"},onChange:r,title:""},null,32),s("div",null,[p(e)?(l(),i("p",Ce,[m(_(p(e))+" ",1),n[1]||(n[1]=s("br",null,null,-1)),n[2]||(n[2]=m("is placed. ",-1))])):(l(),i("p",$e,"+ drop audio..."))]),p(c)?(l(),i("div",Se,[s("p",xe,_(p(c)),1)])):w("",!0)])]))}},we=v(ke,[["__scopeId","data-v-87feabb3"]]),Ue={class:"container"},Le={class:"inputs-group"},Ne={class:"buttons"},Ve=["disabled"],De={key:0,style:{position:"absolute",bottom:"-3rem",color:"orangered","font-size":"1.2rem"}},Fe={__name:"create",setup(o){const u=D(),d=F(),a=M({name:"",price:"",category:"",processing:"",description:"",audio:null}),e=g(""),r=(t,n)=>{a[n]=t};async function c(){const t="public/"+E(a.name)+"_"+j(new Date)+"_"+Math.floor(Math.random()*999),{data:n}=await S("/api/producerProfile/specificUser","$TRpWU4IWiH"),h={name:a.name,price:parseInt(a.price),category:a.category,processing:a.processing,description:a.description,lister_id:u.value.id,audio:t,user_name:n.value.user_name,producer_id:n.value.id};try{const{data:b,error:$}=await S("/api/audio/listings",{method:"post",body:h},"$fNT0Vv5jqs");if($.value){e.value=$.value.statusMessage;return}const{errorUpload:C}=await d.storage.from("audios").upload(t,a.audio);if(C){await S(`/api/audio/listings/${b.value.id}`,{method:"delete"},"$zqf3IbjXf0"),e.value="Cannot upload audio";return}T("/profile/listings")}catch(b){e.value=b.statusMessage}}return(t,n)=>{const h=H,b=J,$=ae,C=pe,U=ve,L=we,N=P;return l(),i("div",Ue,[n[1]||(n[1]=s("h2",{class:"youre-creating"},[m(" You're creating a "),s("span",{class:"green-span"},"new listing")],-1)),s("div",Le,[f(h,{title:"Listing Name",name:"name",placeholder:"Fireball Sound",onChangeInput:r}),f(b,{title:"Price",name:"price",placeholder:"5",onChangeInput:r}),f($,{title:"Category",name:"category",onChangeInput:r,class:"categories"}),f(C,{title:"Processing",name:"processing",onChangeInput:r,class:"processing"}),f(U,{title:"Description",name:"description",placeholder:"When a beautiful fireball erupted, I pressed record and captured its deep rumble and sharp crack perfectly. Back in my studio, I spent hours editing and mastering the recording to ensure it sounded just as incredible on the recording as it did in the forest.",onChangeInput:r,class:"description"}),f(L,{title:"Audio",class:"file",onChangeInput:r})]),s("div",Ne,[s("button",{class:"hero-button",onClick:c,disabled:t.isButtonDisabled}," Submit ",8,Ve),f(N,{to:"/profile/listings"},{default:A(()=>[...n[0]||(n[0]=[s("button",{class:"delete-button"},"Cancel",-1)])]),_:1}),p(e)?(l(),i("p",De,_(p(e)),1)):w("",!0)])])}}},Te=v(Fe,[["__scopeId","data-v-ead47f63"]]);export{Te as default};
