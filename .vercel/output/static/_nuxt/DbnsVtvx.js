import{f as G,h as H}from"./TpeEdVKv.js";import{u as L}from"./BCquIjg3.js";import{_ as D,C as Y,k as X,c as y,o as m,d as a,F as b,z as O,t as $,u as g,a as k,D as N,e as I,E as J,b as Q,f as K,R as Z,S as ee,r as h,T as te,U as ne,V as oe,y as A,G as w,x as j,O as se,h as re,l as W,g as ie,w as ue}from"./Czqr_EBs.js";import{_ as ae}from"./CjALhwT_.js";const le={class:"search-bar"},ce=["onClick"],de=["onClick"],fe=["onClick"],ve={__name:"SideBar",setup(e){const{categories:t}=L(),{prices:n}=L(),{processing:i}=L(),u=Y(),r=X({});function p(s){r.category=s,o()}function l(s){r.price=s,o()}function c(s){r.processing=s,o()}function o(){const s={...r};u.push({query:{category:s.category,price:s.price,processing:s.processing}})}function d(){r.category=void 0,r.price=void 0,r.processing=void 0,u.push({query:{category:void 0,price:void 0,processing:void 0}})}return(s,f)=>(m(),y("div",null,[a("div",le,[a("div",null,[f[3]||(f[3]=a("h3",null,"Category",-1)),a("ul",null,[a("li",{onClick:f[0]||(f[0]=v=>p(void 0))},"All Categories"),(m(!0),y(b,null,O(g(t),v=>(m(),y("li",{onClick:_=>p(v)},$(("formatString"in s?s.formatString:g(G))(v)),9,ce))),256))])]),a("div",null,[f[4]||(f[4]=a("h3",null,"Price",-1)),a("ul",null,[a("li",{onClick:f[1]||(f[1]=v=>l(void 0))},"All Prices"),(m(!0),y(b,null,O(g(n),v=>(m(),y("li",{onClick:_=>l(v)}," $ "+$(v),9,de))),256))])]),a("div",null,[f[5]||(f[5]=a("h3",null,"Processing",-1)),a("ul",null,[a("li",{onClick:f[2]||(f[2]=v=>c(void 0))},"All Processings"),(m(!0),y(b,null,O(g(i),v=>(m(),y("li",{onClick:_=>c(v)},$(v),9,fe))),256))])]),a("button",{class:"filter-remove",onClick:d}," Remove Filters ")])]))}},pe=D(ve,[["__scopeId","data-v-779a2e00"]]),ge={class:"listing-boxy"},me={class:"heading"},ye={class:"listing-content"},_e={__name:"Card",props:{audio:Object},setup(e){const t=Q();return(n,i)=>{const u=J,r=ae;return m(),y("div",null,[a("div",ge,[k(u,{class:"edit-but",to:`/audio/${e.audio.name}-${e.audio.id}`},{default:N(()=>[a("h3",me,[I($(("truncateShorterString"in n?n.truncateShorterString:g(H))(e.audio.name))+" ",1),i[0]||(i[0]=a("span",{class:"green-span"},"|",-1)),I(" $"+$(e.audio.price),1)])]),_:1},8,["to"]),a("div",ye,[k(r,{src:`${g(t).public.supabase.url}/storage/v1/object/public/audios/${e.audio.audio}`},null,8,["src"]),k(u,{to:`/audio/${e.audio.name}-${e.audio.id}`},{default:N(()=>[...i[1]||(i[1]=[a("p",{class:"go-to-listing"},"â†’",-1)])]),_:1},8,["to"])])])])}}},he=D(_e,[["__scopeId","data-v-6823e0dd"]]),we={class:"cards"},Se={__name:"Cards",props:{audios:Array},setup(e){return(t,n)=>{const i=he;return m(),y("div",null,[a("div",we,[(m(!0),y(b,null,O(e.audios,u=>(m(),K(i,{key:u.id,audio:u},null,8,["audio"]))),128))])])}}},$e=D(Se,[["__scopeId","data-v-245492d4"]]);function M(e){return ne()?(oe(e),!0):!1}function S(e){return typeof e=="function"?e():g(e)}const ke={mounted:"mounted"},T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ce=e=>e!=null,Ae=Object.prototype.toString,be=e=>Ae.call(e)==="[object Object]",C=()=>{},P=Oe();function Oe(){var e,t;return T&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function xe(...e){if(e.length!==1)return Z(...e);const t=e[0];return typeof t=="function"?ee(te(()=>({get:t,set:C}))):h(t)}const V=T?window:void 0;function x(e){var t;const n=S(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Ie(...e){let t,n,i,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,u]=e,t=V):[t,n,i,u]=e,!t)return C;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const r=[],p=()=>{r.forEach(d=>d()),r.length=0},l=(d,s,f,v)=>(d.addEventListener(s,f,v),()=>d.removeEventListener(s,f,v)),c=A(()=>[x(t),S(u)],([d,s])=>{if(p(),!d)return;const f=be(s)?{...s}:s;r.push(...n.flatMap(v=>i.map(_=>l(d,v,_,f))))},{immediate:!0,flush:"post"}),o=()=>{c(),p()};return M(o),o}function De(){const e=h(!1),t=se();return t&&j(()=>{e.value=!0},t),e}function Le(e){const t=De();return w(()=>(t.value,!!e()))}function R(e,t,n={}){const{root:i,rootMargin:u="0px",threshold:r=0,window:p=V,immediate:l=!0}=n,c=Le(()=>p&&"IntersectionObserver"in p),o=w(()=>{const _=S(e);return(Array.isArray(_)?_:[_]).map(x).filter(Ce)});let d=C;const s=h(l),f=c.value?A(()=>[o.value,x(i),s.value],([_,z])=>{if(d(),!s.value||!_.length)return;const B=new IntersectionObserver(t,{root:x(z),rootMargin:u,threshold:r});_.forEach(F=>F&&B.observe(F)),d=()=>{B.disconnect(),d=C}},{immediate:l,flush:"post"}):C,v=()=>{d(),f(),s.value=!1};return M(v),{isSupported:c,isActive:s,pause(){d(),s.value=!1},resume(){s.value=!0},stop:v}}function q(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const We={[ke.mounted](e,t){typeof t.value=="function"?R(e,t.value):R(e,...t.value)}};function U(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:U(n)}}function qe(e){const t=e||window.event,n=t.target;return U(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const E=new WeakMap;function Ee(e,t=!1){const n=h(t);let i=null,u="";A(xe(e),l=>{const c=q(S(l));if(c){const o=c;if(E.get(o)||E.set(o,o.style.overflow),o.style.overflow!=="hidden"&&(u=o.style.overflow),o.style.overflow==="hidden")return n.value=!0;if(n.value)return o.style.overflow="hidden"}},{immediate:!0});const r=()=>{const l=q(S(e));!l||n.value||(P&&(i=Ie(l,"touchmove",c=>{qe(c)},{passive:!1})),l.style.overflow="hidden",n.value=!0)},p=()=>{const l=q(S(e));!l||!n.value||(P&&(i==null||i()),l.style.overflow=u,E.delete(l),n.value=!1)};return M(p),w({get(){return n.value},set(l){l?r():p()}})}function Me(){let e=!1;const t=h(!1);return(n,i)=>{if(t.value=i.value,e)return;e=!0;const u=Ee(n,i.value);A(t,r=>u.value=r)}}Me();const Be={class:"flex-box-center"},Fe={key:0,class:"audios"},Ne={style:{"margin-top":"40rem",opacity:"0"}},Pe={key:1,style:{color:"#ff4545"}},Re={key:2,class:"lds-dual-ring",style:{"padding-left":"20rem",top:"100%"}},je={__name:"shop",setup(e){const t=re(),n=w(()=>t.query.category),i=w(()=>t.query.price),u=w(()=>t.query.processing),r=h([]);j(async()=>{setTimeout(async()=>{const{data:c,error:o,refresh:d,pending:s}=await W("/api/audios",{query:{category:n.value,price:i.value,processing:u.value}},"$AA7LqURm7u");s.value||(p.value=!1),!c.value&&o.value&&(o.value=null,d()),r.value=c.value},1)});const p=h(!0);A(()=>t.query,async()=>{const{data:c,error:o,refresh:d}=await W("/api/audios",{query:{category:n.value,price:i.value,processing:u.value}},"$UpU1FzSz5W");!c.value&&o.value&&(o.value=null,d()),r.value=c.value});async function l([{isIntersecting:c}]){if(c){const{data:o}=await W("/api/audios",{method:"post",body:r.value.length,query:{category:n.value,price:i.value,processing:u.value}},"$sCsmQfsUVD");o.value&&r.value.push(...o.value)}}return(c,o)=>{const d=pe,s=$e;return m(),y("div",null,[k(d),a("div",Be,[o[1]||(o[1]=a("h2",{class:"scroll-audios"},[I("Scroll "),a("span",{class:"green-span"},"Audios")],-1)),!g(p)&&g(r)&&g(r).length?(m(),y("div",Fe,[k(s,{audios:g(r)},null,8,["audios"]),ue((m(),y("div",Ne,[...o[0]||(o[0]=[I(" Loading... ",-1)])])),[[g(We),l]])])):!g(p)&&g(r)&&!g(r).length?(m(),y("h2",Pe," No Audios Found With These Filters ")):g(p)?(m(),y("div",Re)):ie("",!0)])])}}},Ge=D(je,[["__scopeId","data-v-33c1f4c9"]]);export{Ge as default};
